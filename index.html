<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุงูู ุงูุงูุชุญุงู - ูููุฉ ุงูุญุงุณุจุงุช ูุงููุนูููุงุช</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>

<body>
    <!-- Notifications Bar -->
    <div id="notificationsBar" class="notifications-bar" style="display:none;">
        <i class="fas fa-bell" style="margin-left: 8px;"></i>
        <span id="notificationsText"></span>
    </div>
    <!-- Top Scorer Alert -->
    <div id="topScorerAlert" class="top-scorer-alert" style="display:none;">
        <span id="topScorerText"></span>
        <button onclick="document.getElementById('topScorerAlert').style.display='none'" class="close-alert-btn"
            title="ุฅุบูุงู ุงูุฅุนูุงู">&times;</button>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-moon"></i>
                <span>ููุงูู ุงูุงูุชุญุงู</span>
            </div>
            <ul class="nav-links">
                <li><a href="#home" class="active">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="#challenge">โก ูุถุน ุงูุชุญุฏู</a></li>
                <li><a href="#exams">ุจูู ุงูุฃุณุฆูุฉ</a></li>
                <li><a href="#essay">ุงูุฃุณุฆูุฉ ุงูููุงููุฉ</a></li>
                <li><a href="#leaderboard">ุงููุชุตุฏุฑูู</a></li>
            </ul>
        </div>
    </nav>

    <!-- AI Chat Bot Button -->
    <div class="chat-bot-btn" id="chatBotBtn" onclick="toggleChatBot()">
        <i class="fas fa-robot"></i>
        <span class="bot-tooltip">ุฐูู - EAAAI</span>
    </div>

    <!-- AI Chat Bot Container -->
    <div class="chat-bot-container" id="chatBotContainer">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="bot-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="bot-info">
                    <h3>ุฐูู</h3>
                    <span class="bot-status"><i class="fas fa-circle"></i> ูุชุตู</span>
                </div>
            </div>
            <button class="close-chat" onclick="toggleChatBot()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be added here -->
        </div>
        <div class="chat-input-container">
            <input type="text" id="chatInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." onkeypress="handleChatKeyPress(event)">
            <button class="send-btn" onclick="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1>๐ ููุงูู ุงูุงูุชุญุงู</h1>
            <p>ููุตุฉ ุชุนููููุฉ ูุทูุงุจ ูููุฉ ุงูุญุงุณุจุงุช ูุงููุนูููุงุช | ุชู ุชุทููุฑูุง ุจูุงุณุทุฉ <a
                    href="https://ibrahim88887.github.io/EAAAI/" target="_blank"
                    style="color: #38ef7d; text-decoration: none;">EAAAI</a></p>
            <div class="hero-buttons">
                <a href="#challenge" class="btn btn-primary">
                    <i class="fas fa-bolt"></i> ุงุจุฏุฃ ุงูุชุญุฏู
                </a>
                <a href="#exams" class="btn btn-secondary">
                    <i class="fas fa-book-open"></i> ุจูู ุงูุฃุณุฆูุฉ
                </a>
                <a href="#leaderboard" class="btn btn-secondary">
                    <i class="fas fa-trophy"></i> ุงููุชุตุฏุฑูู
                </a>
            </div>
        </div>
    </section>

    <!-- Challenge Section -->
    <section id="challenge" class="section challenge-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-bolt"></i>
                ูุถุน ุงูุชุญุฏู
            </h2>

            <div class="challenge-intro" id="challengeIntro">
                <div class="challenge-info">
                    <div class="challenge-icon">โก</div>
                    <h3>ุชุญุฏู ุงูู 15 ุณุคุงู</h3>
                    <p>ุงุฎุชุจุฑ ุณุฑุนุชู ูุฏูุชู! ุฃุฌุจ ุนูู 15 ุณุคุงู ุนุดูุงุฆู ูู 5 ุฏูุงุฆู ููุท</p>
                    <div class="challenge-rules">
                        <div class="rule">
                            <i class="fas fa-clock"></i>
                            <span>5 ุฏูุงุฆู</span>
                        </div>
                        <div class="rule">
                            <i class="fas fa-question-circle"></i>
                            <span>15 ุณุคุงู</span>
                        </div>
                        <div class="rule">
                            <i class="fas fa-random"></i>
                            <span>ุฃุณุฆูุฉ ุนุดูุงุฆูุฉ</span>
                        </div>
                    </div>
                </div>

                <div class="challenge-name-input">
                    <label for="challengerName">
                        <i class="fas fa-user"></i>
                        ุฃุฏุฎู ุงุณูู ููุจุฏุก
                    </label>
                    <input type="text" id="challengerName" placeholder="ุงุณูู ููุง..." maxlength="30">
                    <button class="btn btn-primary start-challenge-btn" onclick="startChallenge()">
                        <i class="fas fa-play"></i>
                        ุงุจุฏุฃ ุงูุชุญุฏู
                    </button>
                </div>
            </div>

            <!-- Challenge Quiz Container -->
            <div class="challenge-container" id="challengeContainer" style="display: none;">
                <div class="challenge-header">
                    <div class="challenge-timer" id="challengeTimer">
                        <i class="fas fa-clock"></i>
                        <span id="timerDisplay">05:00</span>
                    </div>
                    <div class="challenge-progress">
                        <span id="challengeProgress">1/15</span>
                    </div>
                    <div class="challenge-score">
                        <i class="fas fa-star"></i>
                        <span id="challengeScore">0</span>
                    </div>
                </div>

                <div class="challenge-question-container">
                    <div class="challenge-question" id="challengeQuestion"></div>
                    <div class="challenge-options" id="challengeOptions"></div>
                </div>

                <div class="challenge-nav">
                    <button class="btn btn-secondary" id="prevChallengeBtn" onclick="prevChallengeQuestion()" disabled>
                        <i class="fas fa-arrow-right"></i>
                        ุงูุณุงุจู
                    </button>
                    <button class="btn btn-primary" id="nextChallengeBtn" onclick="nextChallengeQuestion()">
                        ุงูุชุงูู
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button class="btn btn-success" id="submitChallengeBtn" onclick="submitChallenge()"
                        style="display: none;">
                        <i class="fas fa-check"></i>
                        ุฅููุงุก ุงูุชุญุฏู
                    </button>
                </div>
            </div>

            <!-- Challenge Result -->
            <div class="challenge-result" id="challengeResult" style="display: none;">
                <div class="result-icon" id="resultIcon">๐</div>
                <h3 id="resultTitle">ุฃุญุณูุช!</h3>
                <div class="result-stats">
                    <div class="stat">
                        <span class="stat-value" id="finalScore">0</span>
                        <span class="stat-label">ุงููุชูุฌุฉ</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="finalTime">00:00</span>
                        <span class="stat-label">ุงูููุช ุงููุณุชุบุฑู</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="correctAnswers">0/15</span>
                        <span class="stat-label">ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ</span>
                    </div>
                </div>
                <div id="challengeMistakesContainer" style="margin-top:24px; display:none;">
                    <h4 style="color:#ff6b6b; margin-bottom:10px;">ุฃุณุฆูุชู ุงูุฎุงุทุฆุฉ:</h4>
                    <ul id="challengeMistakesList"
                        style="list-style:decimal; padding-right:20px; color:#333; font-size:1rem;"></ul>
                </div>
                <button class="btn btn-primary" onclick="restartChallenge()">
                    <i class="fas fa-redo"></i>
                    ุญุงูู ูุฑุฉ ุฃุฎุฑู
                </button>
            </div>

            <!-- Leaderboard -->
            <div class="leaderboard-section">
                <h3 class="leaderboard-title">
                    <i class="fas fa-trophy"></i>
                    ููุญุฉ ุงููุชุตุฏุฑูู
                </h3>
                <div class="leaderboard-container" id="leaderboardContainer">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ุงูุงุณู</th>
                                <th>ุงููุชูุฌุฉ</th>
                                <th>ุงูููุช</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                    <p class="no-records" id="noRecords" style="display: none;">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุนุฏ. ูู ุฃูู ุงููุชุญุฏูู!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Exams Bank Section -->
    <section id="exams" class="section exams-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-book-open"></i>
                ุจูู ุงูุฃุณุฆูุฉ
            </h2>

            <div class="subjects-tabs">
                <button class="subject-tab" data-bank-subject="physics">
                    <i class="fas fa-atom"></i> ููุฒูุงุก 1
                </button>
                <button class="subject-tab active" data-bank-subject="physics2">
                    <i class="fas fa-atom"></i> ููุฒูุงุก 2
                </button>
                <button class="subject-tab" data-bank-subject="math1">
                    <i class="fas fa-calculator"></i> ุฑูุงุถุฉ 1
                </button>
                <button class="subject-tab" data-bank-subject="math0">
                    <i class="fas fa-square-root-alt"></i> ุฑูุงุถุฉ 0
                </button>
                <button class="subject-tab" data-bank-subject="it">
                    <i class="fas fa-laptop-code"></i> IT
                </button>
                <button class="subject-tab" data-bank-subject="computing-history">
                    <i class="fas fa-history"></i> ุชุงุฑูุฎ ุญูุณุจุฉ
                </button>
                <button class="subject-tab" data-bank-subject="computer-laws">
                    <i class="fas fa-gavel"></i> ููุงููู ุญุงุณุจุงุช
                </button>
                <button class="subject-tab" data-bank-subject="electronics">
                    <i class="fas fa-microchip"></i> ุฅููุชุฑูููุงุช
                </button>
            </div>

            <!-- Questions Bank Container -->
            <div class="questions-bank-container" id="questionsBankContainer">
                <!-- ุงูุฃุณุฆูุฉ ุณุชูุนุฑุถ ููุง ุฏููุงููููุงู -->
            </div>
        </div>
    </section>

    <!-- Essay Questions Section -->
    <section id="essay" class="section essay-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-pen-fancy"></i>
                ุงูุฃุณุฆูุฉ ุงูููุงููุฉ
            </h2>

            <div class="subjects-tabs">
                <button class="subject-tab" data-essay-subject="physics">
                    <i class="fas fa-atom"></i> ููุฒูุงุก 1
                </button>
                <button class="subject-tab active" data-essay-subject="physics2">
                    <i class="fas fa-atom"></i> ููุฒูุงุก 2
                </button>
                <button class="subject-tab" data-essay-subject="math1">
                    <i class="fas fa-calculator"></i> ุฑูุงุถุฉ 1
                </button>
                <button class="subject-tab" data-essay-subject="math0">
                    <i class="fas fa-square-root-alt"></i> ุฑูุงุถุฉ 0
                </button>
                <button class="subject-tab" data-essay-subject="it">
                    <i class="fas fa-laptop-code"></i> IT
                </button>
                <button class="subject-tab" data-essay-subject="computing-history">
                    <i class="fas fa-history"></i> ุชุงุฑูุฎ ุญูุณุจุฉ
                </button>
                <button class="subject-tab" data-essay-subject="computer-laws">
                    <i class="fas fa-gavel"></i> ููุงููู ุญุงุณุจุงุช
                </button>
                <button class="subject-tab" data-essay-subject="electronics">
                    <i class="fas fa-microchip"></i> ุฅููุชุฑูููุงุช
                </button>
            </div>

            <!-- Essay Questions Container -->
            <div class="essay-questions-container" id="essayQuestionsContainer">
                <!-- ุงูุฃุณุฆูุฉ ุงูููุงููุฉ ุณุชูุนุฑุถ ููุง ุฏููุงููููุงู -->
            </div>

            <!-- Ask AI Section -->
            <div class="ask-ai-section">
                <h3 class="ask-ai-title">
                    <i class="fas fa-robot"></i>
                    ุงุณุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
                </h3>
                <p class="ask-ai-desc">ุนูุฏู ุณุคุงู ูุด ูุงูู ุฅุฌุงุจุชูุ ุงุณุฃู ุฐูู ูููุณุงุนุฏู!</p>
                <div class="ask-ai-input-container">
                    <textarea id="askAiQuestion" placeholder="ุงูุชุจ ุณุคุงูู ููุง... ูุซุงู: ุงุดุฑุญ ูู ูุงููู ูุงููุณ"></textarea>
                    <button class="btn btn-primary ask-ai-btn" onclick="askAI()">
                        <i class="fas fa-paper-plane"></i>
                        ุงุณุฃู ุฐูู
                    </button>
                </div>
                <div class="ask-ai-response" id="askAiResponse" style="display: none;">
                    <div class="response-header">
                        <i class="fas fa-robot"></i>
                        <span>ุฅุฌุงุจุฉ ุฐูู</span>
                    </div>
                    <div class="response-content" id="askAiResponseContent"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Leaderboard Section -->
    <section id="leaderboard" class="section leaderboard-main-section">
        <div class="container">
            <h2 class="section-title">
                <i class="fas fa-trophy"></i>
                ุงููุชุตุฏุฑูู
            </h2>

            <div class="leaderboard-info">
                <p>ููุง ูุธูุฑ ุฃูุถู ุงููุชุญุฏูู ูู ูุถุน ุงูุชุญุฏู. ุงุจุฏุฃ ุงูุชุญุฏู ูุณุฌู ุงุณูู ูู ููุญุฉ ุงูุดุฑู!</p>
            </div>

            <div class="main-leaderboard-container">
                <table class="main-leaderboard-table">
                    <thead>
                        <tr>
                            <th>ุงููุฑูุฒ</th>
                            <th>ุงูุงุณู</th>
                            <th>ุงููุชูุฌุฉ</th>
                            <th>ุงูููุช</th>
                            <th>ุงูุชุงุฑูุฎ</th>
                        </tr>
                    </thead>
                    <tbody id="mainLeaderboardBody">
                        <!-- Dynamic content -->
                    </tbody>
                </table>
                <p class="no-records-main" id="noRecordsMain">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุนุฏ. <a href="#challenge">ุงุจุฏุฃ ุงูุชุญุฏู
                        ุงูุขู!</a></p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <i class="fas fa-moon"></i>
                        <span>ููุงูู ุงูุงูุชุญุงู</span>
                    </div>
                    <p class="footer-desc">ููุตุฉ ุชุนููููุฉ ูุทูุงุจ ูููุฉ ุงูุญุงุณุจุงุช ูุงููุนูููุงุช</p>
                </div>

                <div class="footer-powered">
                    <h4>ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ</h4>
                    <a href="https://ibrahim88887.github.io/EAAAI/" target="_blank" class="eaaai-brand">
                        <i class="fas fa-robot"></i>
                        <span>EAAAI</span>
                    </a>
                    <p class="eaaai-desc">ุดุฑูุฉ ูุชุฎุตุตุฉ ูู:</p>
                    <ul class="eaaai-services">
                        <li><i class="fas fa-chart-line"></i> ุชุญููู ุงูุจูุงูุงุช</li>
                        <li><i class="fas fa-brain"></i> ุงูุฐูุงุก ุงูุงุตุทูุงุนู</li>
                        <li><i class="fas fa-plug"></i> ุฏูุฌ ุงูููุงูุน ุจุงูู AI</li>
                        <li><i class="fas fa-robot"></i> ุจูุงุก Chatbots ุฐููุฉ</li>
                    </ul>
                </div>

                <div class="footer-contact">
                    <h4>ุชูุงุตู ูุนูุง</h4>
                    <a href="https://ibrahim88887.github.io/EAAAI/" target="_blank" class="footer-link">
                        <i class="fas fa-globe"></i> ุฒูุงุฑุฉ ูููุน EAAAI
                    </a>
                    <a href="https://www.instagram.com/z7w44/" target="_blank" class="footer-link"
                        style="margin-top:8px;display:inline-block;">
                        <i class="fab fa-instagram"></i> ุชุงุจุนูุง ุนูู ุงูุณุชูุฑุงู
                    </a>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 ููุงูู ุงูุงูุชุญุงู - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
                <p class="made-with">ุตููุน ุจู ๐ ุจูุงุณุทุฉ <a href="https://ibrahim88887.github.io/EAAAI/"
                        target="_blank">EAAAI</a></p>
                <div style="margin-top: 12px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <a href="admin-dashboard.html"
                        style="color: #555; font-size: 0.8rem; text-decoration: none; opacity: 0.6; transition: opacity 0.3s;"
                        onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">
                        <i class="fas fa-chart-line"></i> ููุญุฉ ุงูุฅุญุตุงุฆูุงุช
                    </a>
                    <a href="admin-questions.html"
                        style="color: #555; font-size: 0.8rem; text-decoration: none; opacity: 0.6; transition: opacity 0.3s;"
                        onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">
                        <i class="fas fa-plus-circle"></i> ุฅุฏุงุฑุฉ ุงูุฃุณุฆูุฉ
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // ุฌูุจ ุงูุชูุจููุงุช ูู Firebase
        async function loadNotificationFromFirebase() {
            const bar = document.getElementById('notificationsBar');
            const textSpan = document.getElementById('notificationsText');

            try {
                // ุงูุชุญูู ูู ูุฌูุฏ Firebase
                if (typeof db !== 'undefined' && db) {
                    const doc = await db.collection('settings').doc('notification').get();
                    if (doc.exists && doc.data().text && doc.data().text.trim() !== '') {
                        textSpan.textContent = doc.data().text;
                        bar.style.display = 'block';
                        return;
                    }
                }

                // ุฌูุจ ูู localStorage ูุงุญุชูุงุท
                const localNotification = localStorage.getItem('siteNotification');
                if (localNotification && localNotification.trim() !== '') {
                    textSpan.textContent = localNotification;
                    bar.style.display = 'block';
                } else {
                    bar.style.display = 'none';
                }

            } catch (error) {
                console.log('ุฎุทุฃ ูู ุฌูุจ ุงูุชูุจูู:', error);
                bar.style.display = 'none';
            }
        }

        // ุชุญููู ุงูุชูุจูู ุนูุฏ ูุชุญ ุงูุตูุญุฉ
        setTimeout(loadNotificationFromFirebase, 1000);

        // ุฅุนูุงู ุฃุนูู ูุชุตุฏุฑ
        function showTopScorerAlert(name, score) {
            var alertDiv = document.getElementById('topScorerAlert');
            var textSpan = document.getElementById('topScorerText');
            if (alertDiv && textSpan && name && score) {
                textSpan.innerHTML = `๐ฅ <b>${name}</b> ูู ุงููุชุตุฏุฑ ุงูุญุงูู ุนูู ุงูููุตุฉ ุจุฑุตูุฏ <b>${score}</b> ููุทุฉ!`;
                alertDiv.style.display = 'block';
            }
        }

        // ุนุฑุถ ุงูุฃุฎุทุงุก ุจุนุฏ ุงูุชุญุฏู
        function showChallengeMistakes(mistakes) {
            var container = document.getElementById('challengeMistakesContainer');
            var list = document.getElementById('challengeMistakesList');
            if (container && list) {
                if (mistakes && mistakes.length > 0) {
                    list.innerHTML = '';
                    mistakes.forEach(function (item, idx) {
                        var li = document.createElement('li');
                        li.innerHTML = `<b>ุงูุณุคุงู:</b> ${item.question}<br><span style="color:#ff6b6b"><b>ุฅุฌุงุจุชู:</b> ${item.userAnswer || 'ุจุฏูู ุฅุฌุงุจุฉ'}</span><br><span style="color:#38ef7d"><b>ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ:</b> ${item.correctAnswer}</span>`;
                        li.style.marginBottom = '12px';
                        list.appendChild(li);
                    });
                    container.style.display = 'block';
                } else {
                    container.style.display = 'none';
                }
            }
        }

        // ูุฑุงูุจุฉ ุงููุชุตุฏุฑ ูู ููุญุฉ ุงููุชุตุฏุฑูู
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(function () {
                var leaderboard = document.getElementById('mainLeaderboardBody');
                if (leaderboard && leaderboard.children.length > 0) {
                    var firstRow = leaderboard.children[0];
                    if (firstRow) {
                        var name = firstRow.children[1]?.textContent?.trim();
                        var score = firstRow.children[2]?.textContent?.split('/')[0]?.trim();
                        if (name && score) {
                            showTopScorerAlert(name, score);
                        }
                    }
                }
            }, 1200); // ุชุฃุฎูุฑ ุจุณูุท ุจุนุฏ ุงูุชุญููู ูุถูุงู ุชุญุฏูุซ ุงูุฌุฏูู
        });
    </script>
</body>

</html>